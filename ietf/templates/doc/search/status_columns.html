{# Copyright The IETF Trust 2015, All Rights Reserved #}{% load origin %}{% origin %}
{% load ietf_filters ballot_icon %}

<td class="status">
  <div class="pull-right">
    {% ballot_icon doc %}
  </div>

  {% if not doc.get_state_slug == "rfc" %}
    {% if '::' in doc.friendly_state %}
      {{ doc.friendly_state|safe|split:"::"|join:"::<wbr>" }}
    {% else %}
      {{ doc.friendly_state|safe }}
    {% endif %}

    {% if doc|state:"draft-rfceditor" %}
      <wbr>: <a href="https://www.rfc-editor.org/queue2.html#{{ doc.name }}">{{ doc|state:"draft-rfceditor" }}</a>
    {% endif %}

    <wbr>{{ doc|state_age_colored }}
    
    {% if doc.telechat_date %}
      <br>IESG telechat: {{ doc.telechat_date }}
    {% endif %}

    {% with doc.active_defer_event as defer %}
      {% if defer %}
        <br>Deferred by {{ defer.by }} on {{ defer.time|date:"Y-m-d" }})
      {% endif %}
    {% endwith %}

    {% if doc.stream %}
      <br>
      {% if doc|state:"stream" %}
	{{ doc|state:"stream" }}{% if doc.intended_std_level %}:<wbr>{% endif %}
      {% else %}
	{{ doc.stream }} RFC stream{% if doc.intended_std_level %}:<wbr>{% endif %}
      {% endif %}
    {% endif %}

    {% if doc.intended_std_level %}
      {{ doc.intended_std_level }}
    {% endif %}

    {% if doc.reviewed_by_teams %}
      <br>Reviews:
      {% for g in doc.reviewed_by_teams %}
        {{ g.acronym }}{% if not forloop.last %}, {% endif %}
      {% endfor %}
    {% endif %}

    {% for m in doc.milestones %}
      {% if forloop.first %}<br>{% endif %}
      <span title="Part of {{ m.group.acronym }} milestone: {{ m.desc }}" class="milestone">{{ m.due|date:"M Y" }}</span>{% if not forloop.last %}, {% endif %}
    {% endfor %}

  {% else %}{# RFC #}
    {{ doc.std_level|safe }} RFC

    {% if doc.obsoleted_by_list %}
      <br>Obsoleted by {{ doc.obsoleted_by_list|join:", "|urlize_ietf_docs }}
    {% endif %}

    {% if doc.updated_by_list %}
      <br>Updated by {{ doc.updated_by_list|join:", "|urlize_ietf_docs }}
    {% endif %}
  {% endif %}



</td>
