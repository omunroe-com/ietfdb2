{# Copyright The IETF Trust 2015, All Rights Reserved #}{% load origin %}{% origin %}
{% load ietf_filters ballot_icon %}

<td class="status">
  <div class="pull-right">
    {% ballot_icon doc %}
  </div>

  {% if not doc.get_state_slug == "rfc" %}
    {% if '::' in doc.friendly_state %}
      {{ doc.friendly_state|safe|split:"::"|join:"::<wbr>" }}
    {% else %}
      {{ doc.friendly_state|safe }}
    {% endif %}

    <wbr>{{ doc|state_age_colored }}

    {% if doc.telechat_date %}
      <br>IESG telechat: {{ doc.telechat_date }}
    {% endif %}

    {% with doc.active_defer_event as defer %}
      {% if defer %}
        <br>Deferred by {{ defer.by }} on {{ defer.time|date:"Y-m-d" }})
      {% endif %}
    {% endwith %}

    {% if doc.intended_std_level %}
      <br>{{ doc.intended_std_level }}
    {% endif %}

    {% for m in doc.milestones %}
      <span title="Part of {{ m.group.acronym }} milestone: {{ m.desc }}" class="milestone">{{ m.due|date:"M Y" }}</span>
    {% endfor %}

    {% if doc|state:"draft-rfceditor" %}
      <br>RFC Editor: <a href="//www.rfc-editor.org/queue2.html#{{ doc.name }}">{{ doc|state:"draft-rfceditor" }}</a>
    {% endif %}

  {% else %}{# RFC #}
    {{ doc.std_level|safe }} RFC

    {% if doc.obsoleted_by_list %}
      <br>Obsoleted by {{ doc.obsoleted_by_list|join:", "|urlize_ietf_docs }}
    {% endif %}

    {% if doc.updated_by_list %}
      <br>Updated by {{ doc.updated_by_list|join:", "|urlize_ietf_docs }}
    {% endif %}
  {% endif %}

  {% if doc.stream %}
    <br>
    {% if doc|state:"stream" %}
      {{ doc|state:"stream" }}
    {% else %}
      {{ doc.stream }} RFC stream
    {% endif %}
  {% endif %}


</td>
